<form name="depositForm" novalidate role="form" class="form-horizontal">
    <div class="row">
        <div class="col-md-12" ng-if="vm.allow_deposited">
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-blue-sharp">
                        <span class="caption-subject bold uppercase">
                            Select your investment plan
                        </span>
                    </div>
                </div>
                <div class="portlet-body">
                    <section id="bs-pricing-five" class="bs-pricing-five p-top-100 bg-white">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="bs-five-area">
                                    <div class="col-md-4 no-padding" data-ng-repeat="(key, plan) in vm.plans">
                                        <div class="bs-five" data-ng-class="{ 'active': vm.model.plan_id == plan.id }">
                                            <h3 class="text-uppercase">{{ plan.name }}</h3>
                                            <h1 class="bs-caption">{{ plan.daily * 100 }}<sup>%</sup></h1>
                                            <p>Daily for {{ plan.duration }} days</p>
                                            <ul>
                                                <li><b>Deposit: {{ plan.min_deposit }}$ - {{ plan.max_deposit }}$</b></li>
                                                <li>Profit: {{ plan.daily * 100 * plan.duration }}%</li>
                                                <li>24/7 Customer Support</li>
                                            </ul>
                                            <a ng-click="vm.model.plan_id = plan.id; vm.model.amount = plan.min_deposit; vm.model.min_deposit = plan.min_deposit; vm.model.max_deposit = plan.max_deposit"
                                               class="btn blue btn-success btn-round m-top-40">Deposit</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
            <div class="portlet light bordered" ng-show="vm.model.plan_id">
                <div class="portlet-title">
                    <div class="caption font-blue-sharp">
                        <span class="caption-subject bold uppercase">
                            Amount to deposit
                        </span>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="form-group" ng-class="{'has-error' : vm.inValid() }">
                        <label class="col-md-2 control-label"><span class="required">* </span>Amount</label>
                        <div class="col-md-4">    
                            <div class="input-icon right">  
                                <i class="fa fa-check tooltips" style="color: #36c6d3;" ng-hide="vm.inValid()"></i>                      
                                <div class="input-group">                                
                                    <span class="input-group-addon"><i class="fa fa-dollar"></i></span>
                                    <input type="text" ng-model="vm.model.amount" class="form-control" only-number/>
                                </div>
                                <span id="input_group-error" class="help-block help-block-error" ng-show="vm.inValid()">Range between {{ vm.model.min_deposit }} and {{ vm.model.max_deposit }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group" ng-class="{'has-error' : vm.validation.trans_password !== '' }">
                        <label class="control-label col-md-2"><span class="required"> * </span>Transaction Password</label>
                        <div class="col-md-4">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-key"></i></span>
                                <input type="password" class="form-control" ng-model="vm.model.trans_password"> 
                            </div>
                            <span id="input_group-error" class="help-block help-block-error" ng-show="vm.validation.trans_password != ''">{{ vm.validation.trans_password }}</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2">
                        </label>
                        <div class="col-md-4">
                            <button class="btn blue" ng-click="vm.showDepositModal()" ng-disabled="vm.inValid() || vm.model.trans_password == ''">
                                Deposit
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12" ng-if="!vm.allow_deposited">
            <div class="portlet light bordered">
                <div class="portlet-title">
                    <div class="caption font-blue-sharp">
                        <span class="caption-subject bold uppercase">
                            Deposit
                        </span>
                    </div>
                </div>
                <div class="portlet-body">                
                    <div class="note note-warning">
                        <p>Your already deposited. The next deposit is after the old one is expire.</p>
                    </div>
                </div>
            </div>            
        </div>
    </div>
</form>




<div id="deposit_modal" class="modal fade in" tabindex="-1" role="dialog" ng-if="vm.allow_deposited">
    <div class="modal-dialog">
        <div class="modal-content">
            <form class="form-horizontal" role="form">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title">Deposit Fund</h4>
                </div>
                <div class="modal-body">               
                    <div class="note note-warning">
                        <p>After you deposit. Please upload your blank slip (Bitcoin transaction)
                            for us to verify your deposit.</p>
                    </div>
                    <div class="block-chain">
                        <img ng-src="{{vm.qrcode}}">
                        <span>1MXeRULNu6L3En4AKQ5iDgJkBnCLYTC8Nu</span>
                    </div>
                    <div class="bankslip">
                        <span class="btn green fileinput-button" onClick="document.getElementById('bankslip-file').click()">
                            <i class="fa fa-upload"></i>
                            <span>Upload your bankslip</span>
                            <input type="file" accept="image/*"
                                    id="bankslip-file" 
                                    name="file" 
                                    data-url="/api/photo/upload" 
                                    upload>
                        </span>
                        <div class="img-bankslip" id="preview">                              
                            <img id="blah" ng-src="{{vm.src_upload}}" alt="your image" data-ng-if="vm.src_upload"/>
                            <div class="progress" ng-show="vm.upload.in_progress">
                                <div class="progress-bar progress-bar-success" 
                                    role="progressbar" 
                                    ng-style="{'width': vm.upload.percentage + '%' }">
                                    <span class="sr-only"> {{ vm.upload.percentage }}% Complete (success) </span>
                                </div>
                            </div>
                        </div>
                    </div> 
                </div>
                <div class="modal-footer">
                    <button class="btn blue" ng-click="vm.save();" ng-disabled="!vm.src_upload || vm.loading || vm.inValid()">
                        <i class="fa fa-spinner fa-spin" ng-show="vm.loading"></i>
                        Submit
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>